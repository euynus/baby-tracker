# language: zh-CN
功能: 数据统计与可视化
  作为新手父母
  我想要查看宝宝各项数据的统计和趋势
  以便了解规律和发现异常

  背景:
    假如 我已经登录应用
    并且 我有一个名为"小宝"的宝宝档案
    并且 我有足够的历史数据

  场景: 查看今日概览
    假如 今天有以下记录:
      | 类型   | 次数/数据         |
      | 喂奶   | 6次，母乳4次+奶瓶2次 |
      | 睡眠   | 3次，总计8小时    |
      | 尿布   | 8次，湿5次+脏3次  |
      | 体重   | 5.8kg            |
    当 我进入统计页面
    那么 我应该看到今日概览卡片
    并且 显示所有记录类型的汇总数据

  场景: 查看喂奶统计图表
    假如 我有过去7天的喂奶记录
    当 我进入统计页面
    并且 我选择"喂奶"标签
    那么 我应该看到:
      | 图表类型 | 内容                     |
      | 柱状图   | 每天喂奶次数             |
      | 饼图     | 母乳vs奶瓶占比           |
      | 折线图   | 每日母乳总时长趋势       |
      | 汇总     | 7天总次数、平均间隔时间  |

  场景: 查看睡眠统计图表
    假如 我有过去7天的睡眠记录
    当 我进入统计页面
    并且 我选择"睡眠"标签
    那么 我应该看到:
      | 图表类型 | 内容                     |
      | 面积图   | 每天总睡眠时长           |
      | 柱状图   | 每天睡眠次数             |
      | 热力图   | 24小时睡眠分布           |
      | 汇总     | 7天平均睡眠、最长/最短   |

  场景: 查看尿布统计图表
    假如 我有过去7天的尿布记录
    当 我进入统计页面
    并且 我选择"尿布"标签
    那么 我应该看到:
      | 图表类型 | 内容                   |
      | 柱状图   | 每天更换次数           |
      | 饼图     | 湿/脏/混合类型分布     |
      | 汇总     | 7天总次数、平均间隔    |

  场景: 查看生长曲线
    假如 我有过去3个月的生长数据
    当 我进入统计页面
    并且 我选择"生长"标签
    那么 我应该看到:
      | 图表类型 | 内容                       |
      | 折线图   | 体重增长曲线+WHO标准曲线   |
      | 折线图   | 身高增长曲线+WHO标准曲线   |
      | 折线图   | 头围增长曲线+WHO标准曲线   |
      | 汇总     | 最新数据、增长速度、百分位 |

  场景: 切换时间范围
    假如 我在统计页面
    当 我选择时间范围"<范围>"
    那么 图表应该显示对应时间段的数据

    例子:
      | 范围   |
      | 今天   |
      | 7天    |
      | 30天   |
      | 3个月  |
      | 全部   |

  场景: 筛选特定类型数据
    假如 我在喂奶统计页面
    当 我选择筛选"仅母乳"
    那么 图表应该只显示母乳记录
    并且 汇总数据应该更新

  场景: 导出统计报告
    假如 我在统计页面
    当 我点击"导出报告"按钮
    并且 我选择时间范围"本月"
    并且 我选择格式"PDF"
    那么 应该生成包含所有图表和数据的PDF报告
    并且 报告应该包含:
      | 内容           |
      | 喂奶统计图表   |
      | 睡眠统计图表   |
      | 尿布统计图表   |
      | 生长曲线       |
      | 详细数据表     |

  场景: 数据趋势预警
    假如 我有连续7天的睡眠记录
    并且 每天睡眠时长持续下降
    当 我查看睡眠统计
    那么 应该显示警告"睡眠时长持续下降，请关注"

  场景: 异常模式识别
    假如 我有以下喂奶记录:
      | 日期   | 次数 |
      | 昨天   | 8次  |
      | 今天   | 3次  |
    当 我查看喂奶统计
    那么 应该显示提示"今日喂奶次数明显减少"

  场景: 对比不同时间段
    假如 我在统计页面
    当 我选择"对比模式"
    并且 我选择"本周 vs 上周"
    那么 应该显示两个时间段的对比图表
    并且 显示增减百分比

  场景: 查看平均值和中位数
    假如 我有30天的数据
    当 我查看汇总统计
    那么 应该显示:
      | 统计值   | 内容                 |
      | 平均值   | 30天数据的平均值     |
      | 中位数   | 30天数据的中位数     |
      | 最大值   | 30天内的最大值       |
      | 最小值   | 30天内的最小值       |
      | 标准差   | 数据波动程度         |

  场景: 图表交互
    假如 我查看折线图
    当 我点击图表上的数据点
    那么 应该显示该点的详细信息
    并且 可以跳转到对应的记录详情

  场景: 自定义统计周期
    假如 我在统计设置中
    当 我选择"自定义时间范围"
    并且 我设置开始日期"2026-01-01"
    并且 我设置结束日期"2026-01-31"
    那么 图表应该显示该时间段的数据

  场景: 统计数据刷新
    假如 我正在查看统计图表
    当 我添加一条新记录
    并且 我返回统计页面
    那么 图表应该自动刷新
    并且 包含最新的记录数据

  场景: 空数据状态
    假如 选定时间范围内没有数据
    当 我查看统计页面
    那么 应该显示友好的空状态提示
    并且 提示"该时间段暂无记录"
    并且 显示"添加记录"按钮

  场景: 图表主题切换
    假如 我在统计页面
    当 系统切换到深色模式
    那么 图表颜色应该自动适配
    并且 保持良好的对比度和可读性

  规则: 数据计算精度
    假如 统计计算涉及小数
    那么 显示应该保留"<精度>"

    例子:
      | 数据类型 | 精度     |
      | 时长     | 分钟     |
      | 体重     | 小数1位  |
      | 身高     | 小数1位  |
      | 百分比   | 小数1位  |

  场景: 多宝宝数据切换
    假如 我有两个宝宝档案
    当 我在统计页面切换到"宝宝B"
    那么 应该显示宝宝B的统计数据
    并且 图表应该完全刷新

  场景: 统计分享
    假如 我在统计页面
    当 我点击"分享"按钮
    那么 应该生成统计图表截图
    并且 可以分享到社交平台或保存到相册
